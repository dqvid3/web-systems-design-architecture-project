<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>Gestione</title>
    <link href="imgs/favicon.ico" id="favicon" rel="icon" type="image/x-icon"/>
    <link href="gestione/style.css" rel="stylesheet"/>
    <script>
        function confirmDelete() {
            return confirm("Sei sicuro di voler eliminare questo impianto?");
        }
    </script>
</head>

<body>
<h2>Risultati</h2>
<div th:if="${impianti != null}">
    <table>
        <thead>
        <tr>
            <th>Codice Impianto</th>
            <th>Descrizione</th>
            <th>Latitudine</th>
            <th>Longitudine</th>
            <th>Palinsesto</th>
            <th>Stato</th>
            <th>
                <img src="/imgs/gestione/modifica.png" alt="Impossibile caricare l'immagine"/>
            </th>
            <th>
                <img src="/imgs/gestione/elimina.svg" alt="Impossibile caricare l'immagine"/>
            </th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="impianto : ${impianti}">
            <td th:text="${impianto.codImpianto}">Codice Impianto</td>
            <td th:utext="${impianto.descrizione}">Descrizione</td>
            <td th:text="${impianto.latitudine}">Latitudine</td>
            <td th:text="${impianto.longitudine}">Longitudine</td>
            <td th:text="${impianto.palinsesto.getNomePalinsesto()}">Palinsesto</td>
            <td>
                <button th:if="${impianto.stato}" class="acceso"></button>
                <button th:unless="${impianto.stato}" class="spento"></button>
            </td>
            <td>
                <form th:action="@{/salva_impianto}" method="post" th:object="${impianto}">
                    <input type="hidden" th:name="codImpianto" th:value="*{codImpianto}">
                    <input type="hidden" th:name="descrizione" th:value="*{descrizione}">
                    <input type="hidden" th:name="latitudine" th:value="*{latitudine}">
                    <input type="hidden" th:name="longitudine" th:value="*{longitudine}">
                    <input type="hidden" th:name="palinsesto." th:value="*{palinsesto}">
                    <input type="hidden" th:name="palinsesto.codPalinsesto" th:value="*{palinsesto.codPalinsesto}">
                    <button type="submit">Modifica</button>
                </form>
            </td>
            <td>
                <form th:action="@{/elimina_impianto}" method="post" onsubmit="return confirmDelete()">
                    <input type="hidden" name="codImpianto" th:value="${impianto.codImpianto}">
                    <button type="submit">Elimina</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    <form th:action="@{/salva_impianto}" method="get">
        <button type="submit">Aggiungi</button>
    </form>
</div>

<div>

</div>
</body>